<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content=" Deepsha Menghani">
  <title>QABot for Python Shiny</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #b2b2b2; background-color: #000000; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #b2b2b2; } /* Normal */
    code span.al { color: #ff0000; background-color: #3f0000; font-weight: bold; } /* Alert */
    code span.an { color: #ff00ff; } /* Annotation */
    code span.at { color: #ffffaf; } /* Attribute */
    code span.bn { color: #ff8b8b; } /* BaseN */
    code span.bu { color: #87ffaf; font-weight: bold; } /* BuiltIn */
    code span.cf { color: #ffff54; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #ff5454; } /* Char */
    code span.cn { color: #af7f00; font-weight: bold; } /* Constant */
    code span.co { color: #54ffff; } /* Comment */
    code span.cv { color: #0095ff; } /* CommentVar */
    code span.do { color: #e0ffff; } /* Documentation */
    code span.dt { color: #ffff54; } /* DataType */
    code span.dv { color: #ff8b8b; } /* DecVal */
    code span.er { color: #ff5500; text-decoration: underline; } /* Error */
    code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
    code span.fl { color: #ff8b8b; } /* Float */
    code span.fu { color: #cd00cd; } /* Function */
    code span.im { color: #ff54ff; } /* Import */
    code span.in { color: #ffaa00; } /* Information */
    code span.kw { color: #5fd7ff; font-weight: bold; } /* Keyword */
    code span.op { color: #b2b2b2; } /* Operator */
    code span.ot { color: #54ff54; } /* Other */
    code span.pp { color: #87ffaf; } /* Preprocessor */
    code span.re { color: #0095ff; background-color: #22226d; } /* RegionMarker */
    code span.sc { color: #0095ff; } /* SpecialChar */
    code span.ss { color: #ff5500; } /* SpecialString */
    code span.st { color: #ff54ff; } /* String */
    code span.va { color: #06989a; } /* Variable */
    code span.vs { color: #ff54ff; } /* VerbatimString */
    code span.wa { color: #ff0000; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">QABot for Python Shiny</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<br><br><br><strong>Deepsha Menghani</strong><br> 
</div>
</div>
</div>

</section>
<section id="who-am-i" class="slide level2">
<h2>Who am I</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Data Scientist manager at Microsoft…..</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/DeepshaMenghani.png" class="quarto-figure quarto-figure-center" style="width:75.0%" alt="Self portrait."></p>
</figure>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="the-biggest-career-transition-of-my-life" class="slide level2">
<h2>The biggest career transition of my life!</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>DS manager at Microsoft…..</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/DeepshaMenghani.png" class="quarto-figure quarto-figure-center" style="width:75.0%" alt="Self portrait."></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p>And a parent as of this year!</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/fam.jpg" class="quarto-figure quarto-figure-center" style="width:70.0%" alt="Deepsha's puppy and baby hanging."></p>
</figure>
</div>
</div></div>
</section>
<section>
<section id="lets-talk-shiny" class="title-slide slide level1 center">
<h1>Let’s talk Shiny</h1>

</section>
<section id="shiny-started-with-r-and-now-we-pythoning" class="slide level2">
<h2>Shiny: Started with R and now we Pythoning!</h2>
<p><a href="https://shiny.posit.co/py/"><em>https://shiny.posit.co/py/</em></a> <br><br></p>

<img data-src="images/shinypython.png" class="quarto-figure quarto-figure-center r-stretch" style="width:80.0%" alt="Shiny python dashboard example"></section></section>
<section id="who-here-has-heard-about-chatgpt" class="title-slide slide level1 center">
<h1>Who here has heard about ChatGPT?</h1>

</section>

<section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

<img data-src="images/chatgptsun_gif.gif" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="Shiny python dashboard example"></section>
<section id="how-does-it-do-that" class="slide level2">
<h2>How does it do that?</h2>
<div class="fragment">
<!-- -->
<h3 id="to-understand-that-think-of-my-7-month-old-as-a-generative-ai-system">To understand that, think of my 7 month old as a Generative AI system</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/mybaby.jpg" class="quarto-figure quarto-figure-center" style="width:30.0%" alt="my baby"></p>
</figure>
</div>
</div>
</section>
<section id="how-does-it-do-that-1" class="slide level2">
<h2>How does it do that?</h2>
<h3 id="to-understand-that-think-of-my-7-month-old-as-a-generative-ai-system-1">To understand that, think of my 7 month old as a Generative AI system</h3>
<p><br></p>

<img data-src="images/twinkletwinkle.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="twinkle twinkle"></section>
<section id="imagine-such-a-tool-inside-our-shiny-application" class="slide level2">
<h2>Imagine such a tool inside our Shiny application</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/shinyapp.gif" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="steps-to-build-it" class="slide level2">
<h2>Steps to build it</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/shinyapp.gif" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div>
<ol type="1">
<li class="fragment">Set up the Python environment</li>
<li class="fragment">Create an OpenAI account</li>
<li class="fragment">Build the chatbot</li>
<li class="fragment">Develop the application</li>
</ol>
</div>
</div></div>
</section></section>
<section>
<section id="set-up-the-python-environment" class="title-slide slide level1 center">
<h1>1. Set up the Python environment</h1>

</section>
<section id="setting-up-environment" class="slide level2">
<h2>Setting up environment</h2>
<p><br></p>
<div>
<ol type="1">
<li class="fragment"><p>Create a virtual environment for your project (just best practice)</p></li>
<li class="fragment"><p>Install the required packages</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource {md} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href=""></a>pip install shiny openai python-dotenv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li class="fragment"><p>Install Shiny for Python extension (For VSCode)</p></li>
</ol>
</div>
</section></section>
<section>
<section id="create-an-openai-account" class="title-slide slide level1 center">
<h1>2. Create an OpenAI account</h1>

</section>
<section id="create-an-account" class="slide level2">
<h2>Create an account</h2>
<p>Go to <a href="https://platform.openai.com/">https://platform.openai.com/</a></p>

<img data-src="images/openai_platform.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="Sopen ai platform"></section>
<section id="get-the-api-key" class="slide level2">
<h2>Get the API key</h2>

<img data-src="images/openai_apikeypage.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="openai api key"></section>
<section id="section-1" class="slide level2">
<h2></h2>

<img data-src="images/guard-this-shit-with-your-life-always-do.gif" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="guard it"></section>
<section id="safeguard-api-key" class="slide level2">
<h2>Safeguard API key</h2>
<p><br></p>
<div class="fragment">
<p><em>env file</em> <br></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource {md} number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href=""></a>OPENAI_API_KEY = "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<div class="fragment">
<p><em>gitignore file</em> <br></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource {md} number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a href=""></a>.env</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<div class="fragment">
<p><em>Access it from your python file</em> <br></p>
<div id="e4fb3dc9" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb4" data-code-line-numbers="|1-2|4|5|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href=""></a><span class="im">import</span> os</span>
<span id="cb4-2"><a href=""></a><span class="im">import</span> dotenv</span>
<span id="cb4-3"><a href=""></a></span>
<span id="cb4-4"><a href=""></a>dotenv.load_dotenv()</span>
<span id="cb4-5"><a href=""></a>api_key<span class="op">=</span>os.getenv(<span class="st">'OPENAI_API_KEY'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section></section>
<section>
<section id="build-the-chatbot" class="title-slide slide level1 center">
<h1>3. Build the chatbot</h1>
<p><em>conversationchatbot.py file</em> <br></p>
</section>
<section id="connect-with-openai-client" class="slide level2">
<h2>Connect with OpenAI client</h2>
<p><br></p>
<div class="fragment">
<p><em>conversationchatbot.py file</em> <br></p>
<div id="8b8fe7e3" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="|1|2-5|6|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href=""></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb5-2"><a href=""></a><span class="im">import</span> os</span>
<span id="cb5-3"><a href=""></a><span class="im">import</span> dotenv</span>
<span id="cb5-4"><a href=""></a></span>
<span id="cb5-5"><a href=""></a>dotenv.load_dotenv()</span>
<span id="cb5-6"><a href=""></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>os.getenv(<span class="st">'OPENAI_API_KEY'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="build-the-conversation-input-for-openai-call" class="slide level2">
<h2>Build the conversation input for OpenAI call</h2>
<div class="fragment">
<div>
<p>Conversation input consists of:</p>
<ol type="1">
<li class="fragment">The role of the chatbot (character + personality)</li>
<li class="fragment">The question input by the user</li>
<li class="fragment">The entire ongoing conversation thus far + the next question</li>
</ol>
</div>
</div>
<div class="fragment">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/openaisendreceive.png" class="quarto-figure quarto-figure-left" style="width:100.0%" alt="guard it"></p>
</figure>
</div>
</div>
</section>
<section id="build-the-conversation-input-for-openai-call-1" class="slide level2">
<h2>Build the conversation input for OpenAI call</h2>
<div class="fragment">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/openaisendreceive.png" class="quarto-figure quarto-figure-left" style="width:70.0%" alt="guard it"></p>
</figure>
</div>
</div>
<div class="fragment">
<div id="a5bbc021" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href=""></a>conversation <span class="op">=</span> [{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You are an assistant."</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/print_convo_role.png" class="quarto-figure quarto-figure-left" style="width:70.0%" alt="guard it"></p>
</figure>
</div>
</div>
<div class="fragment">
<div id="c13e9143" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7" data-code-line-numbers="1|2|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href=""></a>inputquestion <span class="op">=</span> <span class="st">"Where is the moon?"</span></span>
<span id="cb7-2"><a href=""></a>conversation.append({<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: inputquestion})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/print_convo_user.png" class="quarto-figure quarto-figure-left" style="width:70.0%" alt="guard it"></p>
</figure>
</div>
</div>
</section>
<section id="send-api-call-with-conversation-context-to-get-response" class="slide level2">
<h2>Send API call with conversation context to get response</h2>
<div class="fragment">
<p><em>Chat completion format</em> <br></p>
<div id="fa163d5f" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8" data-code-line-numbers="|1|2|3|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href=""></a>response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb8-2"><a href=""></a>        model<span class="op">=</span><span class="st">"gpt-3.5-turbo"</span>,</span>
<span id="cb8-3"><a href=""></a>        messages<span class="op">=</span>conversation</span>
<span id="cb8-4"><a href=""></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div title="response">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>response</strong></p>
</div>
<div class="callout-content">
<p>ChatCompletion(id=‘chatcmpl-9uUJ1QzCnQP7tPji48AIal9LQ8Fpe’, choices=[Choice(finish_reason=‘stop’, index=0, logprobs=None, message=ChatCompletionMessage(content=“The moon is currently in the sky, but its precise location will depend on your specific location and the time of day. If you would like to know the moon’s current phase or position in the sky for your location, you can use a moon tracking app or website.”, refusal=None, role=‘assistant’, function_call=None, tool_calls=None))], created=1723249891, model=‘gpt-3.5-turbo-0125’, object=‘chat.completion’, service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=54, prompt_tokens=21, total_tokens=75))</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="send-api-call-with-conversation-context-to-get-response-1" class="slide level2">
<h2>Send API call with conversation context to get response</h2>
<p><em>Pull out the response content</em> <br></p>
<div id="d1a1b102" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href=""></a>assistant_response <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div title="assistant_response">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>assistant_response</strong></p>
</div>
<div class="callout-content">
<p>“The moon is currently in the sky, but its precise location will depend on your specific location and the time of day. If you would like to know the moon’s current phase or position in the sky for your location, you can use a moon tracking app or website.”</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="turn-the-api-call-into-a-function" class="slide level2">
<h2>Turn the API call into a function</h2>
<div class="fragment">
<div id="848568d1" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10" data-code-line-numbers="|1-3|5-6|8-9|11|12-13|15-19|21-22|24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href=""></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb10-2"><a href=""></a><span class="im">import</span> os</span>
<span id="cb10-3"><a href=""></a><span class="im">import</span> dotenv</span>
<span id="cb10-4"><a href=""></a></span>
<span id="cb10-5"><a href=""></a>dotenv.load_dotenv()</span>
<span id="cb10-6"><a href=""></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>os.getenv(<span class="st">'OPENAI_API'</span>))</span>
<span id="cb10-7"><a href=""></a></span>
<span id="cb10-8"><a href=""></a><span class="co"># Create a role instruction for the bot</span></span>
<span id="cb10-9"><a href=""></a>conversation <span class="op">=</span> [{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You are an assistant."</span>}]</span>
<span id="cb10-10"><a href=""></a></span>
<span id="cb10-11"><a href=""></a><span class="kw">def</span> ask_question(inputquestion):</span>
<span id="cb10-12"><a href=""></a>    <span class="co"># Append the user's question to the conversation array</span></span>
<span id="cb10-13"><a href=""></a>    conversation.append({<span class="st">"role"</span>: <span class="st">"user"</span>,<span class="st">"content"</span>: inputquestion})</span>
<span id="cb10-14"><a href=""></a></span>
<span id="cb10-15"><a href=""></a>    <span class="co"># Request gpt-3.5-turbo for chat completion or a response</span></span>
<span id="cb10-16"><a href=""></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb10-17"><a href=""></a>        model<span class="op">=</span><span class="st">"gpt-3.5-turbo"</span>,</span>
<span id="cb10-18"><a href=""></a>        messages<span class="op">=</span>conversation</span>
<span id="cb10-19"><a href=""></a>    )</span>
<span id="cb10-20"><a href=""></a></span>
<span id="cb10-21"><a href=""></a>    <span class="co"># Access the response from the API to display it</span></span>
<span id="cb10-22"><a href=""></a>    assistant_response <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span>
<span id="cb10-23"><a href=""></a>    </span>
<span id="cb10-24"><a href=""></a>    <span class="cf">return</span> assistant_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="turn-the-api-call-into-a-function-1" class="slide level2">
<h2>Turn the API call into a function</h2>
<p><em>conversationchatbot.py file</em> <br></p>
<div class="fragment">
<div id="68f0d6b4" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href=""></a>ask_question(<span class="st">"Where is the moon?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div title="function output">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>function output</strong></p>
</div>
<div class="callout-content">
<p>“The moon is currently in the sky, but its precise location will depend on your specific location and the time of day. If you would like to know the moon’s current phase or position in the sky for your location, you can use a moon tracking app or website.”</p>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="lets-create-the-shiny-application-to-serve-this-bot" class="title-slide slide level1 center">
<h1>Let’s create the Shiny application to serve this bot</h1>

</section>
<section id="the-basic-app-commands-and-structure-to-get-started" class="slide level2">
<h2>The basic app commands and structure to get started</h2>
<div class="columns">
<div class="column" style="width:35%;">
<div class="fragment">
<p><em>Shiny create - -help</em> <br><br></p>
</div>
</div><div class="column" style="width:65%;">
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/shinycreatehelp.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</figure>
</div>
</div>
</div></div>
</section>
<section id="the-code-structure-of-a-basic-app" class="slide level2">
<h2>The code structure of a basic app</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><em>Shiny create -t basic-app</em> <br></p>
<div id="9cd3cc6d" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="|1|3-7|9-12|14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb12-2"><a href=""></a></span>
<span id="cb12-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb12-4"><a href=""></a>    ui.panel_title(<span class="st">"Hello Shiny!"</span>),</span>
<span id="cb12-5"><a href=""></a>    ui.input_slider(<span class="st">"n"</span>, <span class="st">"N"</span>, <span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>),</span>
<span id="cb12-6"><a href=""></a>    ui.output_text_verbatim(<span class="st">"txt"</span>),</span>
<span id="cb12-7"><a href=""></a>)</span>
<span id="cb12-8"><a href=""></a></span>
<span id="cb12-9"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb12-10"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb12-11"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb12-12"><a href=""></a>        <span class="cf">return</span> <span class="ss">f"n*2 is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>n() <span class="op">*</span> <span class="dv">2</span><span class="sc">}</span><span class="ss">"</span></span>
<span id="cb12-13"><a href=""></a></span>
<span id="cb12-14"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/appbasic.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section></section>
<section>
<section id="lets-update-the-shiny-app-for-our-qa-bot" class="title-slide slide level1 center">
<h1>Let’s update the Shiny App for our QA bot</h1>

</section>
<section id="add-a-title" class="slide level2">
<h2>Add a title</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><em>Shiny create -t basic-app</em> <br></p>
<div id="ec0a6fb5" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13" data-code-line-numbers="|1|3-9|11-14|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb13-2"><a href=""></a></span>
<span id="cb13-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb13-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb13-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb13-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>)</span>
<span id="cb13-7"><a href=""></a>    )</span>
<span id="cb13-8"><a href=""></a>)</span>
<span id="cb13-9"><a href=""></a></span>
<span id="cb13-10"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb13-11"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb13-12"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb13-13"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb13-14"><a href=""></a></span>
<span id="cb13-15"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinytitle.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="make-the-title-pretty" class="slide level2">
<h2>Make the title pretty</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><em>Shiny create -t basic-app</em> <br></p>
<div id="24693921" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb14-2"><a href=""></a></span>
<span id="cb14-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb14-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb14-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb14-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb14-7"><a href=""></a>    )</span>
<span id="cb14-8"><a href=""></a>)</span>
<span id="cb14-9"><a href=""></a></span>
<span id="cb14-10"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb14-11"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb14-12"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb14-13"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb14-14"><a href=""></a></span>
<span id="cb14-15"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinytitlestyled.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="add-a-description" class="slide level2">
<h2>Add a description</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><em>Shiny create -t basic-app</em> <br></p>
<div id="71d3f515" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb15-2"><a href=""></a></span>
<span id="cb15-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb15-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb15-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb15-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb15-7"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb15-8"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb15-9"><a href=""></a>    )</span>
<span id="cb15-10"><a href=""></a>)</span>
<span id="cb15-11"><a href=""></a></span>
<span id="cb15-12"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb15-13"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb15-14"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb15-15"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb15-16"><a href=""></a></span>
<span id="cb15-17"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinydesc.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="add-a-box-for-user-to-input-question" class="slide level2">
<h2>Add a box for user to input question</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="8bee4ff3" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb16-2"><a href=""></a></span>
<span id="cb16-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb16-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb16-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb16-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb16-7"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb16-8"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb16-9"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb16-10"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb16-11"><a href=""></a>    )</span>
<span id="cb16-12"><a href=""></a>)</span>
<span id="cb16-13"><a href=""></a></span>
<span id="cb16-14"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb16-15"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb16-16"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb16-17"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb16-18"><a href=""></a></span>
<span id="cb16-19"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyuserinput.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="add-a-send-button" class="slide level2">
<h2>Add a send button</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="11de3537" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb17-2"><a href=""></a></span>
<span id="cb17-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb17-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb17-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb17-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb17-7"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb17-8"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb17-9"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb17-10"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb17-11"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb17-12"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>),    </span>
<span id="cb17-13"><a href=""></a>    )</span>
<span id="cb17-14"><a href=""></a>)</span>
<span id="cb17-15"><a href=""></a></span>
<span id="cb17-16"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb17-17"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb17-18"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb17-19"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb17-20"><a href=""></a></span>
<span id="cb17-21"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinysendbutton.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="add-an-area-for-the-answer-to-appear" class="slide level2">
<h2>Add an area for the answer to appear</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="23dd6c70" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb18-2"><a href=""></a></span>
<span id="cb18-3"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb18-4"><a href=""></a>    ui.page_auto(</span>
<span id="cb18-5"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb18-6"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb18-7"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb18-8"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb18-9"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb18-10"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb18-11"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb18-12"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb18-13"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb18-14"><a href=""></a>        ui.card(</span>
<span id="cb18-15"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb18-16"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb18-17"><a href=""></a>        )   </span>
<span id="cb18-18"><a href=""></a>    )</span>
<span id="cb18-19"><a href=""></a>)</span>
<span id="cb18-20"><a href=""></a></span>
<span id="cb18-21"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb18-22"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb18-23"><a href=""></a>    <span class="kw">def</span> txt():</span>
<span id="cb18-24"><a href=""></a>        <span class="cf">return</span> <span class="st">""</span></span>
<span id="cb18-25"><a href=""></a></span>
<span id="cb18-26"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyanswerarea.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="update-the-server-to-get-response-from-openai" class="slide level2">
<h2>Update the server to get response from OpenAI</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="63a97caf" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb19" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb19-2"><a href=""></a><span class="im">import</span> conversationchatbot  </span>
<span id="cb19-3"><a href=""></a></span>
<span id="cb19-4"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb19-5"><a href=""></a>    ui.page_auto(</span>
<span id="cb19-6"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb19-7"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb19-8"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb19-9"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb19-10"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb19-11"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb19-12"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb19-13"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb19-14"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb19-15"><a href=""></a>        ui.card(</span>
<span id="cb19-16"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb19-17"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb19-18"><a href=""></a>        )   </span>
<span id="cb19-19"><a href=""></a>    )</span>
<span id="cb19-20"><a href=""></a>)</span>
<span id="cb19-21"><a href=""></a></span>
<span id="cb19-22"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb19-23"><a href=""></a>    <span class="co"># Define the output for the answer</span></span>
<span id="cb19-24"><a href=""></a>    <span class="at">@output</span></span>
<span id="cb19-25"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb19-26"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.send_button, ignore_none<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-27"><a href=""></a>    <span class="kw">def</span> answer_output():</span>
<span id="cb19-28"><a href=""></a>        <span class="co"># Get the user's question from the input</span></span>
<span id="cb19-29"><a href=""></a>        question <span class="op">=</span> <span class="bu">input</span>.question_input()</span>
<span id="cb19-30"><a href=""></a>        <span class="cf">if</span> question:</span>
<span id="cb19-31"><a href=""></a>            <span class="co"># Get the response from the conversational AI model using the provided API key</span></span>
<span id="cb19-32"><a href=""></a>            response <span class="op">=</span> conversationchatbot.ask_question(question)</span>
<span id="cb19-33"><a href=""></a>            <span class="cf">return</span> response</span>
<span id="cb19-34"><a href=""></a>        <span class="cf">else</span>:</span>
<span id="cb19-35"><a href=""></a>            <span class="co"># Return placeholder text if no question is entered</span></span>
<span id="cb19-36"><a href=""></a>            <span class="cf">return</span> <span class="st">"....."</span></span>
<span id="cb19-37"><a href=""></a></span>
<span id="cb19-38"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyquestionanswer_gif.gif" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section></section>
<section id="the-chatbot-is-ready-and-served-through-our-shiny-application.-you-did-it" class="title-slide slide level1 center">
<h1>The chatbot is ready and served through our shiny application. You did it!</h1>

</section>

<section>
<section id="now-lets-have-the-user-input-their-api-key-in-the-shiny-dashboard" class="title-slide slide level1 center">
<h1>Now, let’s have the user input their API key in the Shiny dashboard</h1>

</section>
<section id="update-conversation-chatbot-function" class="slide level2">
<h2>Update conversation chatbot function</h2>
<h3 id="original-function-with-user-question-input-as-parameter">Original function with user question input as parameter</h3>
<div class="fragment">
<div id="99b6ffd8" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="|1-3|5-6|8-9|11|12-13|15-19|21-22|24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href=""></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb20-2"><a href=""></a><span class="im">import</span> os</span>
<span id="cb20-3"><a href=""></a><span class="im">import</span> dotenv</span>
<span id="cb20-4"><a href=""></a></span>
<span id="cb20-5"><a href=""></a>dotenv.load_dotenv()</span>
<span id="cb20-6"><a href=""></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>os.getenv(<span class="st">'OPENAI_API'</span>))</span>
<span id="cb20-7"><a href=""></a></span>
<span id="cb20-8"><a href=""></a><span class="co"># Create a role instruction for the bot</span></span>
<span id="cb20-9"><a href=""></a>conversation <span class="op">=</span> [{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You are an assistant."</span>}]</span>
<span id="cb20-10"><a href=""></a></span>
<span id="cb20-11"><a href=""></a><span class="kw">def</span> ask_question(inputquestion):</span>
<span id="cb20-12"><a href=""></a>    <span class="co"># Append the user's question to the conversation array</span></span>
<span id="cb20-13"><a href=""></a>    conversation.append({<span class="st">"role"</span>: <span class="st">"user"</span>,<span class="st">"content"</span>: inputquestion})</span>
<span id="cb20-14"><a href=""></a></span>
<span id="cb20-15"><a href=""></a>    <span class="co"># Request gpt-3.5-turbo for chat completion or a response</span></span>
<span id="cb20-16"><a href=""></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb20-17"><a href=""></a>        model<span class="op">=</span><span class="st">"gpt-3.5-turbo"</span>,</span>
<span id="cb20-18"><a href=""></a>        messages<span class="op">=</span>conversation</span>
<span id="cb20-19"><a href=""></a>    )</span>
<span id="cb20-20"><a href=""></a></span>
<span id="cb20-21"><a href=""></a>    <span class="co"># Access the response from the API to display it</span></span>
<span id="cb20-22"><a href=""></a>    assistant_response <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span>
<span id="cb20-23"><a href=""></a>    </span>
<span id="cb20-24"><a href=""></a>    <span class="cf">return</span> assistant_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="update-conversation-chatbot-function-1" class="slide level2">
<h2>Update conversation chatbot function</h2>
<h3 id="add-api-key-as-input-parameter-to-the-function">Add API key as input parameter to the function</h3>
<div class="fragment">
<div id="cd356803" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb21" data-code-line-numbers="|1-3|5-6|8-9|11|12-13|15-19|21-22|24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href=""></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb21-2"><a href=""></a><span class="im">import</span> os</span>
<span id="cb21-3"><a href=""></a><span class="im">import</span> dotenv</span>
<span id="cb21-4"><a href=""></a></span>
<span id="cb21-5"><a href=""></a>dotenv.load_dotenv()</span>
<span id="cb21-6"><a href=""></a></span>
<span id="cb21-7"><a href=""></a><span class="co"># Create an instruction for the bot</span></span>
<span id="cb21-8"><a href=""></a>conversation <span class="op">=</span> [{<span class="st">"role"</span>: <span class="st">"system"</span>, <span class="st">"content"</span>: <span class="st">"You are an assistant."</span>}]</span>
<span id="cb21-9"><a href=""></a></span>
<span id="cb21-10"><a href=""></a><span class="kw">def</span> ask_question(inputquestion, api_key):</span>
<span id="cb21-11"><a href=""></a>    <span class="co"># Initialize the OpenAI client with the provided API key</span></span>
<span id="cb21-12"><a href=""></a>    client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>api_key)</span>
<span id="cb21-13"><a href=""></a></span>
<span id="cb21-14"><a href=""></a>    <span class="co"># Append the user's question to the conversation array</span></span>
<span id="cb21-15"><a href=""></a>    conversation.append({<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: inputquestion})</span>
<span id="cb21-16"><a href=""></a></span>
<span id="cb21-17"><a href=""></a>    <span class="co"># Request gpt-3.5-turbo for chat completion or a response</span></span>
<span id="cb21-18"><a href=""></a>    response <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb21-19"><a href=""></a>        model<span class="op">=</span><span class="st">"gpt-3.5-turbo"</span>,</span>
<span id="cb21-20"><a href=""></a>        messages<span class="op">=</span>conversation</span>
<span id="cb21-21"><a href=""></a>    )</span>
<span id="cb21-22"><a href=""></a></span>
<span id="cb21-23"><a href=""></a>    <span class="co"># Access the response from the API to display it</span></span>
<span id="cb21-24"><a href=""></a>    assistant_response <span class="op">=</span> response.choices[<span class="dv">0</span>].message.content</span>
<span id="cb21-25"><a href=""></a></span>
<span id="cb21-26"><a href=""></a>    <span class="cf">return</span> assistant_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="update-conversation-chatbot-function-2" class="slide level2">
<h2>Update conversation chatbot function</h2>
<h3 id="test-the-function">Test the function</h3>
<div class="fragment">
<div id="61f0ab32" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href=""></a>ask_question(</span>
<span id="cb22-2"><a href=""></a>    <span class="st">"Where is the moon?"</span></span>
<span id="cb22-3"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div title="Error">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Error</strong></p>
</div>
<div class="callout-content">
<p>TypeError: ask_question() missing 1 required positional argument: ‘api_key’</p>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div id="1acbc838" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href=""></a>ask_question(</span>
<span id="cb23-2"><a href=""></a>    <span class="st">"Where is the moon?"</span>, </span>
<span id="cb23-3"><a href=""></a>    os.getenv(<span class="st">'OPENAI_API_KEY'</span>)</span>
<span id="cb23-4"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div title="function output">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>function output</strong></p>
</div>
<div class="callout-content">
<p>“The moon is currently in the sky, orbiting around Earth. Its exact position in the sky will depend on your location and the current time. If you are looking for more specific information about the moon’s position, you can use a stargazing app or website to track its location in real-time.”</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="update-the-app-for-api-key-input" class="slide level2">
<h2>Update the app for API key input</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="2fd4bc0a" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb24" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb24-2"><a href=""></a><span class="im">import</span> conversationchatbot  </span>
<span id="cb24-3"><a href=""></a></span>
<span id="cb24-4"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb24-5"><a href=""></a>    ui.page_auto(</span>
<span id="cb24-6"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb24-7"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb24-8"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb24-9"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb24-10"><a href=""></a>        <span class="co"># Click the button to add the API key</span></span>
<span id="cb24-11"><a href=""></a>        ui.card(ui.input_action_button(<span class="st">"apikey"</span>, <span class="st">"Enter OpenAI API Key to get started"</span>, class_<span class="op">=</span><span class="st">"btn-warning"</span>)), </span>
<span id="cb24-12"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb24-13"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb24-14"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb24-15"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb24-16"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb24-17"><a href=""></a>        ui.card(</span>
<span id="cb24-18"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb24-19"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb24-20"><a href=""></a>        )   </span>
<span id="cb24-21"><a href=""></a>    )</span>
<span id="cb24-22"><a href=""></a>)</span>
<span id="cb24-23"><a href=""></a></span>
<span id="cb24-24"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb24-25"><a href=""></a>    <span class="co"># Define the output for the answer</span></span>
<span id="cb24-26"><a href=""></a>    <span class="at">@output</span></span>
<span id="cb24-27"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb24-28"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.send_button, ignore_none<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-29"><a href=""></a>    <span class="kw">def</span> answer_output():</span>
<span id="cb24-30"><a href=""></a>        <span class="co"># Get the user's question from the input</span></span>
<span id="cb24-31"><a href=""></a>        question <span class="op">=</span> <span class="bu">input</span>.question_input()</span>
<span id="cb24-32"><a href=""></a>        <span class="cf">if</span> question:</span>
<span id="cb24-33"><a href=""></a>            <span class="co"># Get the response from the conversational AI model using the provided API key</span></span>
<span id="cb24-34"><a href=""></a>            response <span class="op">=</span> conversationchatbot.ask_question(question)</span>
<span id="cb24-35"><a href=""></a>            <span class="cf">return</span> response</span>
<span id="cb24-36"><a href=""></a>        <span class="cf">else</span>:</span>
<span id="cb24-37"><a href=""></a>            <span class="co"># Return placeholder text if no question is entered</span></span>
<span id="cb24-38"><a href=""></a>            <span class="cf">return</span> <span class="st">"....."</span></span>
<span id="cb24-39"><a href=""></a></span>
<span id="cb24-40"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyenterapikeybutton.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="update-the-app-for-api-key-input-1" class="slide level2">
<h2>Update the app for API key input</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="89dfe54e" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb25" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb25-2"><a href=""></a><span class="im">import</span> conversationchatbot  </span>
<span id="cb25-3"><a href=""></a></span>
<span id="cb25-4"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb25-5"><a href=""></a>    ui.page_auto(</span>
<span id="cb25-6"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb25-7"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb25-8"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb25-9"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb25-10"><a href=""></a>        <span class="co"># Click the button to add the API key</span></span>
<span id="cb25-11"><a href=""></a>        ui.card(ui.input_action_button(<span class="st">"apikey"</span>, <span class="st">"Enter OpenAI API Key to get started"</span>, class_<span class="op">=</span><span class="st">"btn-warning"</span>)), </span>
<span id="cb25-12"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb25-13"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb25-14"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb25-15"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb25-16"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb25-17"><a href=""></a>        ui.card(</span>
<span id="cb25-18"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb25-19"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb25-20"><a href=""></a>        )   </span>
<span id="cb25-21"><a href=""></a>    )</span>
<span id="cb25-22"><a href=""></a>)</span>
<span id="cb25-23"><a href=""></a></span>
<span id="cb25-24"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb25-25"><a href=""></a>    <span class="co"># Define the output for the answer</span></span>
<span id="cb25-26"><a href=""></a>    <span class="at">@output</span></span>
<span id="cb25-27"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb25-28"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.send_button, ignore_none<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb25-29"><a href=""></a>    <span class="kw">def</span> answer_output():</span>
<span id="cb25-30"><a href=""></a>        <span class="co"># Get the user's question from the input</span></span>
<span id="cb25-31"><a href=""></a>        question <span class="op">=</span> <span class="bu">input</span>.question_input()</span>
<span id="cb25-32"><a href=""></a>        <span class="cf">if</span> question:</span>
<span id="cb25-33"><a href=""></a>            <span class="co"># Get the response from the conversational AI model using the provided API key</span></span>
<span id="cb25-34"><a href=""></a>            response <span class="op">=</span> conversationchatbot.ask_question(question)</span>
<span id="cb25-35"><a href=""></a>            <span class="cf">return</span> response</span>
<span id="cb25-36"><a href=""></a>        <span class="cf">else</span>:</span>
<span id="cb25-37"><a href=""></a>            <span class="co"># Return placeholder text if no question is entered</span></span>
<span id="cb25-38"><a href=""></a>            <span class="cf">return</span> <span class="st">"....."</span></span>
<span id="cb25-39"><a href=""></a></span>
<span id="cb25-40"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyapikeymissing.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="clean-up-the-api-key-error" class="slide level2">
<h2>Clean up the API key error</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="361724c8" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb26" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb26-2"><a href=""></a><span class="im">import</span> conversationchatbot  </span>
<span id="cb26-3"><a href=""></a></span>
<span id="cb26-4"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb26-5"><a href=""></a>    ui.page_auto(</span>
<span id="cb26-6"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb26-7"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb26-8"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb26-9"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb26-10"><a href=""></a>        <span class="co"># Click the button to add the API key</span></span>
<span id="cb26-11"><a href=""></a>        ui.card(ui.input_action_button(<span class="st">"apikey"</span>, <span class="st">"Enter OpenAI API Key to get started"</span>, class_<span class="op">=</span><span class="st">"btn-warning"</span>)), </span>
<span id="cb26-12"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb26-13"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb26-14"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb26-15"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb26-16"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb26-17"><a href=""></a>        ui.card(</span>
<span id="cb26-18"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb26-19"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb26-20"><a href=""></a>        )   </span>
<span id="cb26-21"><a href=""></a>    )</span>
<span id="cb26-22"><a href=""></a>)</span>
<span id="cb26-23"><a href=""></a></span>
<span id="cb26-24"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb26-25"><a href=""></a>    <span class="co"># Define the output for the answer</span></span>
<span id="cb26-26"><a href=""></a>    <span class="at">@output</span></span>
<span id="cb26-27"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb26-28"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.send_button, ignore_none<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-29"><a href=""></a>    <span class="kw">def</span> answer_output():</span>
<span id="cb26-30"><a href=""></a>        <span class="co"># Get the user's question from the input</span></span>
<span id="cb26-31"><a href=""></a>        question <span class="op">=</span> <span class="bu">input</span>.question_input()</span>
<span id="cb26-32"><a href=""></a>        <span class="cf">if</span> question:</span>
<span id="cb26-33"><a href=""></a>            <span class="co"># Check if the API key has been provided</span></span>
<span id="cb26-34"><a href=""></a>            <span class="cf">if</span> <span class="kw">not</span> <span class="bu">input</span>.apikey(): </span>
<span id="cb26-35"><a href=""></a>                <span class="cf">return</span> <span class="st">"Please input your OpenAI API key"</span></span>
<span id="cb26-36"><a href=""></a>            <span class="cf">else</span>: </span>
<span id="cb26-37"><a href=""></a>                <span class="co"># Get the response from the conversational AI model using the provided API key</span></span>
<span id="cb26-38"><a href=""></a>                response <span class="op">=</span> conversationchatbot.ask_question(question, api_key<span class="op">=</span><span class="bu">input</span>.password())</span>
<span id="cb26-39"><a href=""></a>                <span class="cf">return</span> response</span>
<span id="cb26-40"><a href=""></a>        <span class="cf">else</span>:</span>
<span id="cb26-41"><a href=""></a>            <span class="co"># Return placeholder text if no question is entered</span></span>
<span id="cb26-42"><a href=""></a>            <span class="cf">return</span> <span class="st">"....."</span></span>
<span id="cb26-43"><a href=""></a></span>
<span id="cb26-44"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyapikeymissingclean.png" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="create-a-modal-for-user-to-input-api-key" class="slide level2">
<h2>Create a modal for user to input API key</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="315fd026" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb27" data-code-line-numbers="|5-13|"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href=""></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb27-2"><a href=""></a><span class="im">import</span> conversationchatbot  </span>
<span id="cb27-3"><a href=""></a></span>
<span id="cb27-4"><a href=""></a>app_ui <span class="op">=</span> ui.page_fillable(</span>
<span id="cb27-5"><a href=""></a>    ui.page_auto(</span>
<span id="cb27-6"><a href=""></a>        <span class="co"># Title of the application</span></span>
<span id="cb27-7"><a href=""></a>        ui.h1(<span class="st">"Shiny Web Application Chatbot"</span>, style<span class="op">=</span><span class="st">"font-family: Arial, sans-serif; color: #0078B8; text-shadow: 2px 2px 4px #000000; font-size: 2.7em; text-align: center; padding: 20px;"</span>),</span>
<span id="cb27-8"><a href=""></a>        <span class="co"># Description of the application</span></span>
<span id="cb27-9"><a href=""></a>        ui.markdown(<span class="st">"This application allows you to ask questions and get answers using a conversational AI model."</span>),</span>
<span id="cb27-10"><a href=""></a>        <span class="co"># Click the button to add the API key</span></span>
<span id="cb27-11"><a href=""></a>        ui.card(ui.input_action_button(<span class="st">"apikey"</span>, <span class="st">"Enter OpenAI API Key to get started"</span>, class_<span class="op">=</span><span class="st">"btn-warning"</span>)), </span>
<span id="cb27-12"><a href=""></a>        <span class="co"># Text input for user to enter their question</span></span>
<span id="cb27-13"><a href=""></a>        ui.input_text(<span class="st">"question_input"</span>, <span class="st">"Please enter your question and press 'Send':"</span>, width<span class="op">=</span><span class="st">"100%"</span>),</span>
<span id="cb27-14"><a href=""></a>        <span class="co"># Button to send the question</span></span>
<span id="cb27-15"><a href=""></a>        ui.input_action_button(<span class="st">"send_button"</span>, <span class="st">"Send"</span>, class_<span class="op">=</span><span class="st">"btn-primary"</span>), </span>
<span id="cb27-16"><a href=""></a>        <span class="co"># Card to display the answer</span></span>
<span id="cb27-17"><a href=""></a>        ui.card(</span>
<span id="cb27-18"><a href=""></a>            ui.output_text(<span class="st">"answer_output"</span>, inline<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb27-19"><a href=""></a>            style<span class="op">=</span><span class="st">"white-space: pre-wrap; width: 100%; margin: 3; padding: 10px;"</span></span>
<span id="cb27-20"><a href=""></a>        )   </span>
<span id="cb27-21"><a href=""></a>    )</span>
<span id="cb27-22"><a href=""></a>)</span>
<span id="cb27-23"><a href=""></a></span>
<span id="cb27-24"><a href=""></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb27-25"><a href=""></a>    <span class="co"># Display a modal for API key input when the 'apikey' input is triggered</span></span>
<span id="cb27-26"><a href=""></a>    <span class="at">@reactive.effect</span></span>
<span id="cb27-27"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.apikey)</span>
<span id="cb27-28"><a href=""></a>    <span class="kw">def</span> _():</span>
<span id="cb27-29"><a href=""></a>        m <span class="op">=</span> ui.modal(  </span>
<span id="cb27-30"><a href=""></a>            <span class="co"># Input field for the OpenAI API key</span></span>
<span id="cb27-31"><a href=""></a>            ui.input_password(<span class="st">"password"</span>, <span class="st">"OpenAI API key:"</span>),</span>
<span id="cb27-32"><a href=""></a>            <span class="co"># Button to connect to OpenAI</span></span>
<span id="cb27-33"><a href=""></a>            ui.input_action_button(<span class="st">"connect"</span>, <span class="st">"Connect to OpenAI"</span>),</span>
<span id="cb27-34"><a href=""></a>            easy_close<span class="op">=</span><span class="va">True</span>,  </span>
<span id="cb27-35"><a href=""></a>            footer<span class="op">=</span><span class="va">None</span>,  </span>
<span id="cb27-36"><a href=""></a>        )  </span>
<span id="cb27-37"><a href=""></a>        ui.modal_show(m)  <span class="co"># Show the modal</span></span>
<span id="cb27-38"><a href=""></a>        </span>
<span id="cb27-39"><a href=""></a>    <span class="co"># Remove the modal when the 'connect' button is pressed</span></span>
<span id="cb27-40"><a href=""></a>    <span class="at">@reactive.effect</span>  </span>
<span id="cb27-41"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.<span class="ex">connect</span>)  </span>
<span id="cb27-42"><a href=""></a>    <span class="kw">def</span> __():  </span>
<span id="cb27-43"><a href=""></a>        ui.modal_remove()  <span class="co"># Hide the modal</span></span>
<span id="cb27-44"><a href=""></a>    </span>
<span id="cb27-45"><a href=""></a>    <span class="co"># Define the output for the answer</span></span>
<span id="cb27-46"><a href=""></a>    <span class="at">@output</span></span>
<span id="cb27-47"><a href=""></a>    <span class="at">@render.text</span></span>
<span id="cb27-48"><a href=""></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.send_button, ignore_none<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-49"><a href=""></a>    <span class="kw">def</span> answer_output():</span>
<span id="cb27-50"><a href=""></a>        <span class="co"># Get the user's question from the input</span></span>
<span id="cb27-51"><a href=""></a>        question <span class="op">=</span> <span class="bu">input</span>.question_input()</span>
<span id="cb27-52"><a href=""></a>        <span class="cf">if</span> question:</span>
<span id="cb27-53"><a href=""></a>            <span class="co"># Check if the API key has been provided</span></span>
<span id="cb27-54"><a href=""></a>            <span class="cf">if</span> <span class="kw">not</span> <span class="bu">input</span>.apikey(): </span>
<span id="cb27-55"><a href=""></a>                <span class="cf">return</span> <span class="st">"Please input your OpenAI API key"</span></span>
<span id="cb27-56"><a href=""></a>            <span class="cf">else</span>: </span>
<span id="cb27-57"><a href=""></a>                <span class="co"># Get the response from the conversational AI model using the provided API key</span></span>
<span id="cb27-58"><a href=""></a>                response <span class="op">=</span> conversationchatbot.ask_question(question, api_key<span class="op">=</span><span class="bu">input</span>.password())</span>
<span id="cb27-59"><a href=""></a>                <span class="cf">return</span> response</span>
<span id="cb27-60"><a href=""></a>        <span class="cf">else</span>:</span>
<span id="cb27-61"><a href=""></a>            <span class="co"># Return placeholder text if no question is entered</span></span>
<span id="cb27-62"><a href=""></a>            <span class="cf">return</span> <span class="st">"....."</span></span>
<span id="cb27-63"><a href=""></a></span>
<span id="cb27-64"><a href=""></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br> <img data-src="images/shinyapikeymodalexit_gif.gif" class="quarto-figure quarto-figure-center" style="width:100.0%" alt="Shiny python dashboard example"></p>
</div></div>
</section>
<section id="i-know-that-was-a-lot-of-information" class="slide level2">
<h2>I know that was a lot of information!!!</h2>
<p><br></p>

<img data-src="images/taylorscreaming.gif" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" alt="TSwift screaming"></section></section>
<section id="and-there-is-more-you-can-do-with-chatbots-in-shiny" class="title-slide slide level1 center">
<h1>And there is more you can do with chatbots in Shiny</h1>

</section>

<section>
<section id="such-as-make-it-answer-questions-using-your-own-dashboard-documentation" class="title-slide slide level1 center">
<h1>Such as make it answer questions using your own dashboard documentation</h1>

</section>
<section id="resources" class="slide level2">
<h2>Resources</h2>
<ul>
<li><strong>Everything related to this presentation</strong>
<ul>
<li><a href="https://bit.ly/shinyforpythonslides">Short Link to presentation - https://bit.ly/shinyforpythonslides</a></li>
<li><a href="https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/">Shiny code</a></li>
<li><a href="">“Who is the Goodest Doggy” App</a></li>
</ul></li>
<li><strong>Additional Peeps, resources and events to follow</strong>
<ul>
<li><a href="https://www.linkedin.com/in/gshotwell/">Gordon Shotwell</a></li>
<li><a href="https://www.linkedin.com/posts/rachaeldempsey_were-so-excited-to-share-a-quicker-and-simpler-activity-7166453499340259328-__Me?utm_source=share&amp;utm_medium=member_desktop">Upcoming Shiny Express webinar by Winston Chang</a></li>
<li><a href="https://shiny.posit.co/py/docs/overview.html">Shiny for python documentation</a></li>
<li><a href="https://shiny.posit.co/py/docs/deploy.html">Deploying Shiny for Python application</a></li>
</ul></li>
</ul>
</section>
<section id="lets-connect" class="slide level2">
<h2>Let’s connect</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Mastodon: <a href="https://fosstodon.org/@deepsha">@deepsha</a></p>
<p>LinkedIn: <a href="https://bit.ly/deepshamenghani">deepshamenghani</a></p>
<p>Github: <a href="https://github.com/deepshamenghani/">deepshamenghani</a></p>
<p><br></p>
<h3 id="github-repo-qr-code">Github repo qr code</h3>
<div class="quarto-figure quarto-figure-left">
<figure>
<p><a href="https://bit.ly/chatbot_shiny_python"><img data-src="images/bit.ly_chatbot_shiny_python.png" class="quarto-figure quarto-figure-left" style="max-" alt="QR code to slides." height="300"></a></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/DeepshaMenghani.png" height="600"></p>
</div></div>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // target, if specified
              link.setAttribute("target", "_blank");
              if (link.getAttribute("rel") === null) {
                link.setAttribute("rel", "noopener");
              }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>